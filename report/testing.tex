\newcommand{\exsetup}[5]{%
    \begin{tabular}{lll}
        \toprule
        \multirow{2}{*}{Best arm}   & $\mu$    & #1 \\
                                    & $\sigma$ & #2 \\
        \multirow{2}{*}{Other arms} & $\mu$    & #3 \\
                                    & $\sigma$ & #4 \\
        \multicolumn{2}{l}{Number of arms}     & #5 \\
        \bottomrule
    \end{tabular}}


\newcommand{\ob}{$\sigma_{ob}$}
\newcommand{\obstar}{$\sigma^*_{ob}$}

\chapter{Results}
\label{ch:results}

Here we present a representative subset of the obtained results.
We provide graphs to visualise how different parameters influence the results.

Parameter values are likely to interact and impact the end result in different ways, and it may be difficult to capture these interactions directly.
By fixing all but one parameter and testing for a range of values for this parameter, we capture different aspects of how the optimal observation noise changes.

\textbf{Why 1000 rounds and not 10,000 (graph or table).}
\textbf{Keeping standard deviations equal all over. Why is this a good idea, and why is it not a bad idea?}

\section{Multiarmed Bandit}
\begin{figure}[hbtp]
    \hspace*{-2.5cm}
    \begin{minipage}[c]{0.39\textwidth}
        \begin{gnuplot}[terminal=epslatex,terminaloptions={color palfuncparam "500,0.03"}]
            set style data lines
            set grid
            set xlabel "Arms" rotate
            set ylabel "Rounds" rotate
            set zlabel "Observation noise" rotate
            set log xy
            set xyplane 0
            set xtics 2
            set xrange [2:64]
            set yrange [10:1000]
            set zrange [0:0.3]
            set palette rgbformulae 23,28,3
            set pm3d interpolate 3,3
            unset hidden3d
    splot "../data/bandit/good-5.0,0.5\_bad-4.0,0.5\_est-0.0,50.0\_num-(64,1.0,1.0)\_rounds-1000\_algo-UCB1.data" using 5:6:7 title "" with pm3d, \
      "../data/bandit/good-5.0,0.5\_bad-4.0,0.5\_est-0.0,50.0\_num-(64,1.0,1.0)\_rounds-1000\_algo-UCB1.data" using 5:6:7 title "" with line lt -1 lw 1
    \end{gnuplot}
    \end{minipage}
    \hspace*{7.5cm}
    \begin{minipage}[c]{0.49\textwidth}
    \exsetup{5.0}{0.5}{4.0}{0.5}{2 -- 64}
    \end{minipage}
\caption{Best observation noise varying with the number of arms.}
\label{fig:numarms}
\end{figure}

As the horizon is extended, the overall trend is for \obstar{} to increase (but see figure~\ref{fig:gooddev}). 
\textbf{Why}

We first look at the case where the number of arms is changed, from the simplest case with 2 arms to a comparatively hard problem with 64 arms.
This corresponds directly to increasing the complexity of the environment, and so we get the first indication that observation noise can be used as a complexity measure; a low \obstar{} indicates a complex environment, and as the best observation noise increases the environment gradually becomes simpler.
This effect is nicely illustrated in figure~\ref{fig:numarms}, where we have varied the number of arms available to the player in a specific setting.
The rate of change in \obstar{} decreases rapidly -- note the logarithmic scales on the \emph{Arms} and \emph{Rounds} axes.
Intuitively, in a complex environment we need to limit exploration by being more greedy in our choice of arms, as most of the arms pulled for explorationâ€™s sake will be suboptimal.

\begin{figure}[htbp]
    \hspace*{-2.5cm}
    \begin{minipage}[c]{0.39\textwidth}
    \begin{gnuplot}[terminal=epslatex,terminaloptions=color]
    set style data lines
    set grid
    set hidden3d
    set pm3d
    set ylabel "Bad arm mean" rotate
    set xlabel "Rounds" rotate
    set zlabel "Observation noise" rotate
    set log x
    set xyplane 0
    set ytics 0.5
    set xrange [100:1000]
    set yrange [3:4.5]
    set view 40,36
    set palette rgbformulae 23,28,3
    splot "../data/bandit/good-5.0,0.5\_bad-(0.5,4.5,0.5),0.5\_est-10.0,2.0\_num-5\_rounds-1000\_algo-UCB1.data" using 6:3:7 title ""
    \end{gnuplot}
    \end{minipage}
    \hspace*{7.5cm}
    \begin{minipage}[c]{0.49\textwidth}
    \exsetup{5.0}{0.5}{0.5 -- 4.5}{0.5}{5}
    \end{minipage}
    \caption{Best observation noise varying with the mean on the suboptimal arms}{Best observation noise varying with the mean on the suboptimal arms. As the mean is lowered past 3 or so changing observation noise stops having an effect, so these numbers are excluded from this figure.}
\label{fig:badmean}
\end{figure}

As the mean of the suboptimal arms get closer to $\mu^*$, more exploration can be afforded due to the small difference in payoffs.
This effect is illustrated in figure~\ref{fig:badmean}, where \obstar{} increases along with the mean of the bad arms.

\begin{figure}[htbp]
    \hspace*{-2.5cm}
    \begin{minipage}[c]{0.39\textwidth}
    \begin{gnuplot}[terminal=epslatex,terminaloptions=color]
    set grid
    set pm3d
    set ylabel "[r]{\\shortstack{Best arm \\\\ standard deviation}}"
    set xlabel "Rounds"
    set zlabel "Observation noise" rotate
    set xyplane 0
    set palette rgbformulae 23,28,3
    set view 65,312
    set xtics 200
    set ytics 1
    set ytics offset 0,-0.5
    splot "../data/bandit/good-6.5,(0.1,5.0,0.9)\_bad-4.0,0.1\_est-0.0,50.0\_num-5\_rounds-1000\_algo-UCB1.data" using 6:2:7 with line lt -1 lw 2 title ""
    \end{gnuplot}
    \end{minipage}
    \hspace*{7.5cm}
    \begin{minipage}[c]{0.49\textwidth}
    \exsetup{6.5}{0.1 -- 5.0}{4.0}{0.1}{5}
    \end{minipage}
\caption{Varying standard deviation of the best arm}
\label{fig:gooddev}
\end{figure}


Figure~\ref{fig:ex1} illustrates why, when using LTS, it is important to make a good choice of observation noise.
In this case we see that the total regret achieved increases rapidly when the value is set too low, while it increases slightly as we move past the optimum.
With different setups we see similar results, although the slope after the optimum may be steeper or closer to zero.
\begin{figure}[htbp]
    \hspace*{-2.5cm}
    \begin{minipage}[c]{0.39\textwidth}
    \begin{gnuplot}[terminal=epslatex,terminaloptions=color]
    set style data lines
    set grid
    set xlabel "Observation noise"
    set ylabel "Total regret"
    set xrange [0.15:0.95]
    plot "../data/bruteforce/good-5.0,2.0\_bad-4.0,4.0\_est-10.0,0.5\_num-2\_obstart-0.15\_obend-0.95\_obstep-0.01\_rounds-10000\_reps-10000.data" using 2:(column(1)==1000?(5000-column(3)):(1/0)) title ""
    \end{gnuplot}
    \end{minipage}
    \hspace*{7.5cm}
    \begin{minipage}[c]{0.49\textwidth}
    \exsetup{5.0}{2.0}{4.0}{4.0}{2}
    \end{minipage}
\caption{Resulting total regret from varying observation noise.}
\label{fig:ex1}
\end{figure}

\begin{figure}[htbp]
    \hspace*{-2.5cm}
    \begin{minipage}[c]{0.39\textwidth}
    \begin{gnuplot}[terminal=epslatex,terminaloptions=color]
    set style data lines
    set grid
    set xlabel "Rounds"
    set ylabel "Instant regret"
    set log x
    set xrange [4:1000]
    plot "../data/instantrewards/good-5.0,2.0\_bad-4.0,4.0\_est-10.0,0.5\_num-2\_obnoise-0.51\_rounds-1000\_reps-100000\_algo-LTS.data" using 1:(5-column(2)) title "\\textsc{lts: 0.51}", "../data/instantrewards/good-5.0,2.0\_bad-4.0,4.0\_est-10.0,0.5\_num-2\_obnoise-0.6\_rounds-1000\_reps-100000\_algo-LTS.data" using 1:(5-column(2)) title "\\textsc{lts: 0.60}", "../data/instantrewards/good-5.0,2.0\_bad-4.0,4.0\_num-2\_rounds-1000\_reps-100000\_algo-UCB1.data" using 1:(5-column(2)) title "\\textsc{ucb1}"
    \end{gnuplot}
    \end{minipage}
    \hspace*{7.5cm}
    \begin{minipage}[c]{0.49\textwidth}
    \exsetup{5.0}{2.0}{4.0}{4.0}{2}
    \end{minipage}
\caption{Instant regret for UCB1 and LTS.}
\label{fig:ex2}
\end{figure}

LTS is superior to UCB1, when the appropriate observation noise is selected.
In figure~\ref{fig:ex2} this superiority is clearly demonstrated:
Even though UCB1 performs quite good from the start it seems to stop reducing its regret after a while, whereas LTS converges towards zero regret.
The figure also illustrates how a suboptimal choice of \ob{} causes the algorithm to perform worse.

\begin{figure}[htbp]
    \hspace*{-2.5cm}
    \begin{minipage}[c]{0.39\textwidth}
    \begin{gnuplot}[terminal=epslatex,terminaloptions=color]
    set style data lines
    set grid
    set xlabel "Observation noise"
    set ylabel "Total regret"
    set yrange [13:15]
    set xrange [0.1:0.4]
    plot "../data/bruteforce/good-5.0,0.5\_bad-1.5,0.5\_est-10.0,2.0\_num-5\_obnoise-(0.01,0.4,0.01)\_rounds-1000\_reps-100000.data" using (column(1)==1000?column(2):1/0):(5000-column(3)) title ""
    \end{gnuplot}
    \end{minipage}
    \hspace*{7.5cm}
    \begin{minipage}[c]{0.49\textwidth}
    \exsetup{5.0}{0.5}{1.5}{0.5}{5}
    \end{minipage}
\caption{Sample from~\ref{fig:badmean}, with mean 1.5. This is the result of averaging over 100,000 runs.}
\label{fig:badmeanob}
\end{figure}

In figure~\ref{fig:baddev} we see that changing only the standard deviation of the suboptimal arms does not influence the choice of observation noise, except for when the number of rounds is very low.
This is a welcome result in light of the practice of letting the standard deviation of both the good and bad arms be equal.

In contrast, the standard deviation of the best arm has a large influence on \ob{}. As it is increased, \ob{} also increases. (Figure~\ref{fig:gooddev}).

\begin{figure}[hbtp]
    \hspace*{-2.5cm}
    \begin{minipage}[c]{0.39\textwidth}
    \begin{gnuplot}[terminal=epslatex,terminaloptions=color]
    set style data lines
    set grid
    set xlabel "Bad arm standard deviation"
    set ylabel "Observation noise" rotate
    set xtics 0.5
    set ytics 0.1
    set xrange [0:3.5]
    set yrange [0:0.4]
    set palette rgbformulae 23,28,3
    plot for [t in "100 500 1000"] "../data/bandit/good-5.0,0.5\_bad-4.0,(0.1,3.5,0.2)\_est-10.0,2.0\_num-5\_rounds-1000\_algo-UCB1.data" using (column(6)==t?column(4):1/0):7 title t." rounds"
    \end{gnuplot}
    \end{minipage}
    \hspace*{7.5cm}
    \begin{minipage}[c]{0.49\textwidth}
    \exsetup{5.0}{0.5}{4.0}{0.1 -- 3.5}{5}
    \end{minipage}
\caption{Varying standard deviation of the bad arms}
\label{fig:baddev}
\end{figure}

\section{Goore Game}

As seen in Figure(Incoming), the higher white noise you have the higher observation noise is needed to achieve
the optimal reward. Also the number of rounds the Goore game is going to be runned(?) also plays into what is
the optimal choice of observation noise. The more rounds it is going to run the higher the observation noise 
is recommended. This increase is not linear but slows down the more rounds you run. 

The ratio of yes and no may also impact the optimal observation noise to some degree.
The more the ratio goes towards 0 or 1, the optimal observation noise rises. However the number of bandits
do not seam to impact the optimal observation noise unless the number of bandits are not optimal for the ratio.
For example having 5 bandits and ratio of 50/50. 

