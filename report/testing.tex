

\newcommand{\gooresetup}[3]{%
	\begin{tabular}{ll}
		\toprule
		Ratio & #1 \\
		Rounds & #2 \\
		Number of players & #3 \\
		\bottomrule
	\end{tabular}}
	



\chapter{Results}
\label{ch:results}

Here we present a representative subset of the obtained results.
We provide graphs to visualise how different parameters influence the results.

Parameter values are likely to interact and impact the end result in different ways, and it may be difficult to capture these interactions directly.
By fixing all but one parameter and testing for a range of values for this parameter, we capture different aspects of how the optimal observation noise changes.

\textbf{Why 1000 rounds and not 10,000 (graph or table).}
\textbf{Keeping standard deviations equal all over. Why is this a good idea, and why is it not a bad idea?}

\section{Multiarmed Bandit}
\begin{figure}[hbtp]
    \hspace*{-2.5cm}
    \begin{minipage}[c]{0.39\textwidth}
        \begin{gnuplot}[terminal=epslatex,terminaloptions=color solid]
            set style data dots
            set grid
            set nokey
            set xlabel "Arms" rotate
            set ylabel "Rounds" rotate
            set zlabel "Observation noise" rotate
            set log xy
            set xyplane 0
            set xtics 2
            set xrange [2:64]
            set yrange [10:1000]
            set zrange [0:0.3]
            set palette model CMY rgbformulae 7,5,15
            set pm3d at s hidden3d 100 
            set style line 100 lt -1 lw 2
    splot "../data/bandit/good-5.0,0.5\_bad-4.0,0.5\_est-0.0,50.0\_num-(64,1.0,1.0)\_rounds-1000\_algo-UCB1.data" using 5:6:7
    \end{gnuplot}
%    \input{armsplot.tex}
    \end{minipage}
    \hspace*{7.5cm}
    \begin{minipage}[c]{0.49\textwidth}
    \banditsetup{5.0}{4.0}{0.5}{2 -- 64}{10 -- 1000}
    \end{minipage}
    \caption{Best observation noise varying with the number of arms. Note the logarithmic scales on the \emph{Arms} and \emph{Rounds} axes.}
\label{fig:numarms}
\end{figure}

As the horizon is extended, the overall trend is for \obstar{} to increase (but see figure~\ref{fig:gooddev}). 
\textbf{Why}


We first look at the case where the number of arms is changed, from the simplest case with 2 arms to a comparatively hard problem with 64 arms.
This corresponds directly to increasing the complexity of the environment, and so we get the first indication that observation noise can be used as a complexity measure: a low \obstar{} indicates a complex environment, and as the best observation noise increases the environment gradually becomes simpler.
Intuitively, in a complex environment we need to limit exploration by being more greedy in our choice of arms, as most of the arms pulled for explorationâ€™s sake will be suboptimal.
This effect is nicely illustrated in figure~\ref{fig:numarms}, where we have varied the number of arms available to the player in a specific setting.
We see that \obstar{} exhibits approximately logarithmic growth as the number of rounds increase, and exponential decay as the number of arms increase.

\begin{figure}[htbp]
    \hspace*{-2.5cm}
    \begin{minipage}[c]{0.39\textwidth}
    \begin{gnuplot}[terminal=epslatex,terminaloptions=color solid]
    set grid
    set nokey
    set style data dots
    set pm3d at s hidden3d 100
    set style line 100 lt -1 lw 2
    set ylabel "Bad arm mean" rotate
    set xlabel "Rounds" rotate
    set zlabel "Observation noise" rotate
    set xyplane 0
    set ytics 3,0.5
    set xtics 100,100
    set xrange [100:1000]
    set yrange [3:4.5]
    set view 40,36
    set palette model CMY rgbformulae 7,5,15
    splot "../data/bandit/good-5.0,0.5\_bad-(0.5,4.5,0.5),0.5\_est-10.0,2.0\_num-5\_rounds-1000\_algo-UCB1.data" using 6:3:7
#    set style data lines
#    set xlabel "Bad arm mean" rotate
#    set ylabel "Observation noise" rotate
#    set xtics 0.5
#    set xrange [3.0:4.5]
#    plot "../data/bandit/good-5.0,0.5\_bad-(0.5,4.5,0.5),0.5\_est-10.0,2.0\_num-5\_rounds-1000\_algo-UCB1.data" using (column(6)==1000?column(3):NaN):7
    \end{gnuplot}
    \end{minipage}
    \hspace*{7.5cm}
    \begin{minipage}[c]{0.49\textwidth}
    \banditsetup{5.0}{0.5 -- 4.5}{0.5}{5}{1000}
    \end{minipage}
    \caption{Best observation noise varying with the mean on the suboptimal arms.}{As the mean is lowered past 3 or so changing observation noise stops having an effect, so these numbers are excluded from this figure.}
\label{fig:badmean}
\end{figure}

Next we modify problem difficulty by changing the expected value of the bad arms.
Again we see that as complexity is decreased by narrowing the gap between the expected values -- lessening the penalty of choosing suboptimal arms -- \obstar{} also decreases.
This effect is illustrated in figure~\ref{fig:badmean}, where \obstar{} increases along with the mean of the bad arms.

\begin{figure}[htbp]
    \hspace*{-2.5cm}
    \begin{minipage}[c]{0.39\textwidth}
    \begin{gnuplot}[terminal=epslatex,terminaloptions=color solid]
    set grid
    set pm3d
    set ylabel "Standard deviation" offset 2,-1
    set xlabel "Rounds" offset 1,-1
    set zlabel "Observation noise" rotate
    set xyplane 0
    set palette model CMY rgbformulae 7,5,15
    set view 65,312
    set xtics 200 offset -1.2,0.-0.5
    set xrange [10:1000]
    set yrange [0.1:5]
    set ytics 0.1,0.9
    set ytics offset 0,-0.5
    splot "../data/bandit/good-6.5,(0.1,5.0,0.9)\_bad-4.0,(0.1,5.0,0.9)\_est-0.0,50.0\_num-5\_rounds-1000\_algo-UCB1.data" using 6:2:7 with line lt -1 lw 2 title ""
    \end{gnuplot}
    \end{minipage}
    \hspace*{7.5cm}
    \begin{minipage}[c]{0.49\textwidth}
    \banditsetup{6.5}{4.0}{0.1 -- 5.0}{5}{10 -- 1000}
    \end{minipage}
\caption{Varying standard deviation.}
\label{fig:gooddev}
\end{figure}

On the other hand, in figure~\ref{fig:gooddev} we see that increasing the uncertainty of rewards by increasing the variance of the best arm has the effect of increasing \obstar{}. 
So the notion that smaller \obstar{} indicates a more complex environment may be too simplistic.

\begin{figure}[htbp]
    \hspace*{-2.5cm}
    \begin{minipage}[c]{0.39\textwidth}
    \begin{gnuplot}[terminal=epslatex,terminaloptions=color solid]
    set style data lines
    set grid
    set xlabel "Rounds"
    set ylabel "Instant regret"
    set log x
    set xrange [4:1000]
    plot "../data/instantrewards/good-5.0,2.0\_bad-4.0,2.0\_est-10.0,50.0\_num-2\_obnoise-0.51\_rounds-1000\_reps-100000\_algo-LTS\_kind-Instant.data" using 1:(5-column(2)) title "LTS (\\ob{} = 0.51)", \
         "../data/instantrewards/good-5.0,2.0\_bad-4.0,2.0\_num-2\_rounds-1000\_reps-100000\_algo-UCB1\_kind-Instant.data" using 1:(5-column(2)) title "UCB1"
    \end{gnuplot}
    \end{minipage}
    \hspace*{7.5cm}
    \begin{minipage}[c]{0.49\textwidth}
    \banditsetup{5.0}{4.0}{2.0}{2}{1 -- 1000}
    \end{minipage}
\caption{Instant regret for UCB1 and LTS.}
\label{fig:ucbcomp}
\end{figure}

LTS is superior to UCB1 when the optimal observation noise value is selected.
In figure~\ref{fig:ucbcomp} this is clearly demonstrated:
Even though UCB1 performs reasonably good from the start it seemingly ceases reducing its regret after a while, whereas LTS converges towards zero regret in this case.

\begin{figure}[hbtp]
    \hspace*{-2.5cm}
    \begin{minipage}[c]{0.39\textwidth}
    \begin{gnuplot}[terminal=epslatex,terminaloptions=color solid]
    set style data lines
    set grid
    set xlabel "Bad arm standard deviation"
    set ylabel "Observation noise" rotate
    set xtics 0.5
    set ytics 0.1
    set xrange [0:3.5]
    set yrange [0:0.4]
    set palette model CMY rgbformulae 7,5,15
    plot for [t in "100 500 1000"] "../data/bandit/good-5.0,0.5\_bad-4.0,(0.1,3.5,0.2)\_est-10.0,2.0\_num-5\_rounds-1000\_algo-UCB1.data" using (column(6)==t?column(4):1/0):7 title t." rounds"
    \end{gnuplot}
    \end{minipage}
    \hspace*{7.5cm}
    \begin{minipage}[c]{0.49\textwidth}
    \banditsetup{5.0}{4.0}{0.1 -- 3.5}{5}{1000}
    \end{minipage}
\caption{Varying standard deviation of the bad arms, on the best arm it is kept at 0.5.}
\label{fig:baddev}
\end{figure}

In figure~\ref{fig:baddev} we see that changing only the standard deviation of the suboptimal arms does not have any meaningful influence on the optimal observation noise, except for when the number of rounds is low.
This is a welcome result in light of the practice of letting the standard deviation of both the good and bad arms be equal.

\section{Goore Game}

Goore game have only one optimal observation noise, and it is at the peek of where the rewards are highest.
In Figure \ref{fig:ex12} you may see that the optimal noise is between 1.3 and 1.4 and going past those two
points will lead to less reward. The drop is steeper past 1.3 then past 1.4. Reason for this is that when players
decide to quickly the ratio may not be achieved in time.
As seen in Figure \ref{fig:ex8}, the higher white noise you have the higher observation noise is needed to achieve
the optimal reward. Also the optimal observation noise rises if the Goore game have more time. The reason for this
is that having more time the exploration may use more of it and the players still have plenty left to just exploit
the Goore game for reward. 

\begin{figure}[htbp]
    \hspace*{-2.5cm}
    \begin{minipage}[c]{0.39\textwidth}
    \begin{gnuplot}[terminal=epslatex,terminaloptions=color solid]
    set grid
    set xrange [0.9:1.8]
    set style data lines
    set xlabel "Observasion noise"  
    set ylabel "Reward" rotate
    plot "../python/datafolder/obsdata_repetitions-10000_bandits-40_rounds-1000_ratio-0.3_noise-1.1.data" title ""
    \end{gnuplot}
    \end{minipage}
    \hspace*{7.5cm}
    \begin{minipage}[c]{0.49\textwidth}
    \gooresetup{0.3}{10 000}{40}
    \end{minipage}
\caption{Overview of observation noise}
\label{fig:ex12}
\end{figure}

\begin{figure}[htbp]
    \hspace*{-2.5cm}
    \begin{minipage}[c]{0.39\textwidth}
    \begin{gnuplot}[terminal=epslatex,terminaloptions=color solid]
    set grid
    set style data lines
    set key left
    set ylabel "Observasion noise" rotate 
    set xlabel "White Noise"
    set xrange [0.1:3.9]
    plot for [m in "10 100 1000"] "../python/3ddata/new_created_data.data" using 4:($1==m."0.0"&&$2==10.0&&$3==0.2?$5:1/0) title m."0.0 Rounds"
    \end{gnuplot}
    \end{minipage}
    \hspace*{7.5cm}
    \begin{minipage}[c]{0.49\textwidth}
    \gooresetup{0.2}{In graph}{10}
    \end{minipage}
\caption{Finding the optimal observation noise.}
\label{fig:ex8}
\end{figure}

\begin{figure}[htbp]
    \hspace*{-2.5cm}
    \begin{minipage}[c]{0.39\textwidth}
    \begin{gnuplot}[terminal=epslatex,terminaloptions=color solid]
    set grid
    set style data lines
    set key left
    set ylabel "Observasion noise" rotate 
    set xlabel "White Noise"
    set xrange [0.1:3.9]
    plot for [m in "2 3 4"] "../python/3ddata/new_created_data.data" using 4:($1==10000.0&&$2==10.0&&$3=="0.".m?$5:1/0) title "0.".m." Ratio"
    \end{gnuplot}
    \end{minipage}
    \hspace*{7.5cm}
    \begin{minipage}[c]{0.49\textwidth}
    \gooresetup{In graph}{10 000}{10}
    \end{minipage}
\caption{Change in raito effects the optimal observation noise.}
\label{fig:ex9}
\end{figure}


The ratio of yes and no may also impact the optimal observation noise.
The more the ratio goes towards 0 or 1, the optimal observation noise rises as shown in Figure \ref{fig:ex9} 
and Figure \ref{fig:ex8}. The reason because of this is that when it is close to 100/0 ratio a bad reward
may not be because of the choice but rather the other players. The number of bandits do not seam to affect the
optimal observation noise to much to have a big effect. The only difference is the starting point when White 
noise is low, as White noise gets bigger they all go towards the same optimal observation noise.

\begin{figure}[htbp]
    \hspace*{-2.5cm}
    \begin{minipage}[c]{0.39\textwidth}
    \begin{gnuplot}[terminal=epslatex,terminaloptions=color solid]
    set grid
    set style data lines
    set key left
    set ylabel "Observasion noise" rotate 
    set xlabel "White Noise"
    set xrange [0.1:3.9]
    plot for [m in "4 7 10"] "../python/3ddata/new_created_data.data" using 4:($1==10000.0&&$2==m.".0"&&$3==0.3?$5:1/0) title m." Players"
    \end{gnuplot}
    \end{minipage}
    \hspace*{7.5cm}
    \begin{minipage}[c]{0.49\textwidth}
    \gooresetup{0.3}{10 000}{In graph}
    \end{minipage}
\caption{Change in number of players.}
\label{fig:ex10}
\end{figure}

In this next figure \ref{fig:ex11}, it shows how both round numbers and white noise effect the optimal observasion noise for
goore game. And they both show that the more rounds and the higher white noise is, it is better to have a high
observation noise. Also if you have a high white noise and few rounds, the optimal observation noise is 
lower then if you have low white noise and many rounds, although variations are high in this area. 


\begin{figure}[htbp]
    \hspace*{-2.5cm}
    \begin{minipage}[c]{0.39\textwidth}
    \begin{gnuplot}[terminal=epslatex,terminaloptions=color solid]
    set grid
    set xrange [10:10000]
    set log x
    set pm3d
    set xyplane 0
    set view 60,310
    set palette model CMY rgbformulae 7,5,15
    set style data lines
    set zlabel "Observasion noise" rotate 
    set ylabel "White noise"
    set xlabel "Rounds"
    splot "../python/3ddata/new_created_data.data" every 4 using 1:4:($2==10.0&&$3==0.3?$5:1/0) with line lt -1 lw 1 title ""
    \end{gnuplot}
    \end{minipage}
    \hspace*{7.5cm}
    \begin{minipage}[c]{0.49\textwidth}
    \gooresetup{0.3}{In graph}{10}
    \end{minipage}
\caption{Overview of Rounds and White noise}
\label{fig:ex11}
\end{figure}

